<!-- Copyright 2014 Google Inc. All Rights Reserved. -->

<!--
The bitmapper-toolbar Polymer element encapsulates a toolbar with a dropdown
menu (with New, Open, Save, and Save As options), a logo, the name of the open
image, and Undo/Redo buttons.

`newHandler` handles creating a new file
`openHandler` handles opening a file
`saveHandler` handles saving a file
`saveAsHandler` handles saving as a new file
`undoHandler` handles undoing an action
`redoHandler` handles redoing an action
`fileName` is the name of the file, originally set to 'untitled'

@element bitmapper-toolbar
-->

<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import"
  href="../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../bower_components/core-toolbar/core-toolbar.html">
<link rel="import"
  href="../bower_components/paper-dropdown/paper-dropdown.html">
<link rel="import"
  href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import"
  href="../bower_components/paper-menu-button/paper-menu-button.html">

<polymer-element name="bitmapper-toolbar"
  attributes="newHandler openHandler saveHandler saveAsHandler undoHandler redoHandler resizeDialogHandler fileName">
  <template>
    <style>
      core-header-panel {
        height: 100%;
        /* Inherit min-height so that the element is filled, but still changes
         * height as the window is resized. */
        min-height: inherit;
      }
      core-toolbar {
        align-items: center;
        background: #26a69a;
        color: white;
        height: 100%;
        width: 100%;
      }
      /* This offsets the 4px shadow from the core toolbar. !important overrides
       * the shadow DOM rule which didn't allow any margin-bottom to be greater
       * than 0px. */
      core-toolbar > * {
        margin: 0 8px 4px 8px !important;
      }
      paper-icon-button {
        background: #00897b;
        border-radius: 40px;
      }
      paper-item {
        color: black;
      }
      paper-item:hover {
        background-color: #e0f2f1;
      }
      /* overflow, text-overflow and white-space styling are rules for
       * displaying the filename. */
      span {
        display: inline-block;
        line-height: 40px;
        overflow: hidden;
        text-overflow: ellipsis;
        text-transform: uppercase;
        vertical-align: middle;
        white-space: nowrap;
      }
    </style>

    <core-header-panel>
      <core-toolbar>
        <paper-menu-button>
          <paper-icon-button icon="menu"></paper-icon-button>
          <!-- Adding the transition attribute so that the menu doesn't
          transition. -->
          <paper-dropdown class="dropdown" transition>
            <paper-item on-click="{{ newHandler }}">
              New
            </paper-item>
            <paper-item on-click="{{ openHandler }}">
              Open
            </paper-item>
            <paper-item on-click="{{ saveHandler }}">
              Save
            </paper-item>
            <paper-item on-click="{{ saveAsHandler }}">
              Save As
            </paper-item>
          </paper-dropdown>
        </paper-menu-button>

        <span flex>Bitmapper - {{ fileName }}</span>

        <paper-button on-click="{{ resizeDialogHandler }}">
          Resize
        </paper-button>

        <paper-icon-button
          icon="undo" title="Undo" on-click="{{ undoHandler }}">
        </paper-icon-button>
        <paper-icon-button
          icon="redo" title="Redo" on-click="{{ redoHandler }}">
        </paper-icon-button>
      </core-toolbar>
    </core-header-panel>
  </template>

  <script>
    Polymer ('bitmapper-toolbar');
  </script>
</polymer-element>
